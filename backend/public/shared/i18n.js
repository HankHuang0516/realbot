const TRANSLATIONS = {
    en: {
        // Mission Control (mission.html)
        "mc_title": "E-Claw Mission Control",
        "mc_auth_title": "Mission Control",
        "mc_auth_subtitle": "Enter your device credentials to sync Dashboard",
        "mc_input_device_id": "Device ID",
        "mc_input_device_secret": "Device Secret",
        "mc_btn_connect": "Connect",
        "mc_auth_error_missing": "Please enter Device ID and Secret",
        "mc_refresh": "Refresh",
        "mc_save": "Save to Cloud",
        "mc_saving": "Uploading...",
        "mc_save_unsaved": "Save to Cloud *",
        "mc_todo_title": "TODO List",
        "mc_btn_add": "+ Add",
        "mc_mission_title": "Mission List",
        "mc_done_title": "Done List",
        "mc_notes_title": "Notes (Bot Read-only)",
        "mc_rules_title": "Rules (Workflow)",
        "mc_sync_unsaved": "* Unsaved changes",
        "mc_sync_synced": "Synced",
        "mc_empty_todo": "No TODO items",
        "mc_empty_mission": "No active missions",
        "mc_empty_done": "No completed items",
        "mc_empty_notes": "No notes",
        "mc_empty_rules": "No rules",
        "mc_status_pending": "Pending",
        "mc_status_inprogress": "In Progress",
        "mc_status_blocked": "Blocked",
        "mc_status_done": "Done",
        "mc_status_cancelled": "Cancelled",
        "mc_priority_low": "Low",
        "mc_priority_medium": "Med",
        "mc_priority_high": "High",
        "mc_priority_urgent": "Urgent",
        "mc_confirm_delete": "Are you sure you want to delete?",
        "mc_confirm_version": "Version conflict (You: v{you}, Server: v{server}). Download latest version?",
        "mc_dlg_add_todo": "Add TODO",
        "mc_dlg_edit": "Edit",
        "mc_dlg_title": "Title",
        "mc_dlg_desc": "Description",
        "mc_dlg_priority": "Priority",
        "mc_dlg_save": "Save",
        "mc_dlg_cancel": "Cancel",
        "mc_dlg_add_note": "Add Note",
        "mc_dlg_edit_note": "Edit Note",
        "mc_dlg_content": "Content",
        "mc_dlg_category": "Category",
        "mc_dlg_add_rule": "Add Rule",
        "mc_dlg_edit_rule": "Edit Rule",
        "mc_dlg_rule_name": "Rule Name",
        "mc_dlg_rule_type": "Type",
        "mc_menu_move_mission": "Move to Mission",
        "mc_menu_mark_done": "Mark Done",
        "mc_menu_delete": "Delete",

        // Portal Shared
        "portal_login_title": "E-Claw - Login",
        "portal_app_title": "E-Claw",
        "portal_app_subtitle": "Live Wallpaper Companion",
        "nav_dashboard": "Dashboard",
        "nav_chat": "Chat",
        "nav_mission": "Mission",
        "nav_settings": "Settings",
        "nav_logout": "Logout",

        // Login (index.html)
        "login_tab_login": "Login",
        "login_tab_register": "Register",
        "login_tab_device": "Device",
        "login_label_email": "Email",
        "login_label_password": "Password",
        "login_placeholder_email": "your@email.com",
        "login_placeholder_password": "Enter password",
        "login_btn_login": "Login",
        "login_btn_logging_in": "Logging in...",
        "login_link_forgot": "Forgot password?",
        "login_label_confirm": "Confirm Password",
        "login_hint_password": "Must contain both letters and numbers",
        "login_btn_create": "Create Account",
        "login_btn_creating": "Creating account...",
        "login_device_desc": "Already have the Android app? Enter your device credentials from Settings > Web Portal.",
        "login_btn_device": "Login with Device",
        "login_forgot_desc": "Enter your email and we'll send you a reset link.",
        "login_btn_reset_link": "Send Reset Link",
        "login_link_back": "Back to login",
        "login_reset_desc": "Enter your new password.",
        "login_btn_reset": "Reset Password",
        "login_msg_fill_all": "Please fill in all fields",
        "login_msg_pass_match": "Passwords do not match",

        // Dashboard (dashboard.html)
        "dash_title": "Dashboard",
        "dash_loading": "Loading entities...",
        "dash_empty_title": "No entities bound yet",
        "dash_empty_desc": "Add your first entity below to get started!",
        "dash_add_entity": "Add Entity",
        "dash_label_select_slot": "Select Entity Slot",
        "dash_btn_generate": "Generate Code",
        "dash_btn_generating": "Generating...",
        "dash_btn_regenerate": "Regenerate",
        "dash_btn_copy": "Copy Command",
        "dash_code_expired": "Code expired - generate a new one",
        "dash_code_expires_in": "Expires in {m}:{ss}",
        "dash_btn_remove": "Remove",
        "dash_remove_title": "Remove Entity",
        "dash_remove_desc": "Are you sure you want to remove <strong>{name}</strong> (#{id})? This will unbind the entity from your device.",
        "dash_slot_occupied": "Slot {id} is already occupied",
        "dash_entity_bound": "{count} / {max} bound",
        "dash_avatar_title": "Choose Avatar",
        "dash_avatar_desc": "Select an emoji avatar for this entity",
        "dash_code_copied": "Command copied to clipboard!",
        "dash_code_generated": "Binding code generated!",
        "dash_entity_removed": "Entity removed successfully",
        "dash_no_messages": "No messages yet",
        "dash_rename_title": "Rename Entity",
        "dash_rename_placeholder": "Enter new name (max 20 chars)",
        "dash_rename_save": "Save",
        "dash_rename_success": "Name updated!",

        // Official Borrow (dashboard.html)
        "webhook_error_title": "Push Notification Failed",
        "webhook_error_message": "Please paste the following message to OpenClaw: \"Webhook binding error or not using POST /api/bot/register. Please reload 'Public Webhook URL' (gateway config) and 'Gateway Token', then immediately call /api/bot/register: Use the newly bound deviceId/entityId/botSecret with webhook_url and gateway token to complete registration.\"",
        "message_copied": "Message copied",
        "borrow_title": "Official Bot Rental",
        "borrow_desc": "Rent an official bot for your entity. The bot will automatically interact with your live wallpaper.",
        "borrow_select_entity": "Select Entity",
        "borrow_free_title": "Free Version",
        "borrow_free_desc": "One free bot per device",
        "borrow_free_feat_shared": "Shared memory with all free users",
        "borrow_free_feat_limit": "15 messages/day limit",
        "borrow_free_available": "Available",
        "borrow_free_unavailable": "No free bots available",
        "borrow_free_bound_other": "Already bound on Entity #{id}",
        "borrow_personal_title": "Monthly Version",
        "borrow_personal_desc": "Dedicated personal bot",
        "borrow_personal_feat_dedicated": "Dedicated cloud environment",
        "borrow_personal_feat_memory": "Private memory (only yours)",
        "borrow_personal_feat_unlimited": "Unlimited messages (no daily limit)",
        "borrow_personal_feat_247": "24/7 always online",
        "borrow_price_period": "/month",
        "borrow_discount_label": "Limited-time Beta discount",
        "borrow_personal_available": "{count} bots available",
        "borrow_personal_sold_out": "Sold out",
        "borrow_btn_bind_free": "Use Free Version",
        "borrow_btn_bind_personal": "Subscribe & Bind",
        "borrow_btn_pay": "Pay NT$288",
        "borrow_btn_unbind": "Unbind",
        "borrow_btn_binding": "Binding...",
        "borrow_btn_unbinding": "Unbinding...",
        "borrow_bound_free": "Free bot bound",
        "borrow_bound_personal": "Personal bot bound",
        "borrow_slot_occupied": "This entity slot already has a regular binding",
        "borrow_bind_success": "Official bot bound successfully!",
        "borrow_unbind_success": "Official bot unbound successfully",
        "borrow_unbind_title": "Unbind Official Bot",
        "borrow_unbind_desc": "Are you sure you want to unbind the official bot from Entity #{id}? The bot will be returned to the pool.",
        "borrow_current_bindings": "Current Bindings",
        "borrow_no_bindings": "No official bots bound",
        "borrow_type_free": "Free",
        "borrow_type_personal": "Monthly",
        "borrow_entity_has_binding": "Already has official bot",
        "borrow_pay_title": "Official Bot Rental - NT$288/month",
        "borrow_pay_desc": "Enter your credit card to rent a dedicated personal bot (NT$288/month). Includes unlimited messages and 24/7 always online.",
        "borrow_cost_title": "Why rent? Self-hosting cost comparison",
        "borrow_cost_eclaw": "E-Claw Official Bot",
        "borrow_cost_24_7": "24/7 stable connection",
        "borrow_cost_included": "Included",
        "borrow_cost_server": "Cloud Server (Railway/AWS)",
        "borrow_cost_llm": "LLM API (OpenAI/Claude)",
        "borrow_cost_setup": "Learning OpenClaw deployment",
        "borrow_cost_priceless": "Priceless time",

        // Settings (settings.html)
        "settings_title": "Settings",
        "settings_account": "Account",
        "settings_email": "Email",
        "settings_device_id": "Device ID",
        "settings_sub": "Subscription",
        "settings_sub_premium": "PREMIUM",
        "settings_sub_free": "FREE",
        "settings_usage_today": "Messages today",
        "settings_usage_unlimited": "{used} sent today (Unlimited)",
        "settings_usage_limit": "{used}/{limit} sends today",
        "settings_renews_on": "Renews on {date}",
        "settings_price": "NT$99",
        "settings_period": "per month",
        "settings_sub_benefit_1": "\u2713 Unlimited messages (no 15/day limit)",
        "settings_sub_benefit_2": "\u2713 Up to 8 entity slots (instead of 4)",
        "settings_btn_subscribe": "Subscribe",
        "settings_btn_hide_card": "Hide Card Form",
        "settings_label_card": "Card Number",
        "settings_label_expiry": "Expiry Date",
        "settings_label_ccv": "CCV",
        "settings_btn_pay": "Pay NT$99",
        "settings_processing": "Processing payment...",
        "settings_btn_cancel": "Cancel Subscription",
        "settings_btn_cancelling": "Cancelling...",
        "settings_cancel_title": "Cancel Subscription",
        "settings_cancel_desc": "Your premium access will remain active until the current billing period ends. After that, you'll revert to the free plan with 15 messages per day.",
        "settings_btn_keep": "Keep Subscription",
        "settings_lang": "Language",
        "settings_lang_changed": "Language changed, reloading...",
        "settings_version": "Version",
        "settings_privacy_link": "Privacy Policy",
        "settings_privacy_title": "Privacy Policy",
        "settings_privacy_content": "<b>1. Commitment to Privacy First</b><br>The E-claw team understands the importance of privacy to you. We hereby solemnly declare: <b>We will never sell, leak, or misuse any of your personal data.</b><br><br><b>2. What Data Do We Collect?</b><br>To provide our service, we only collect the minimum data necessary for operation:<br>- Device ID: Used to distinguish different devices.<br>- App Version: Used for compatibility checks.<br>- Binding Data: Agent name and status.<br><br><b>We do NOT collect:</b><br>- Your name, phone number, or email.<br>- Your GPS location.<br>- Your camera or microphone data.<br><br><b>3. OpenClaw Protocol</b><br>We are firm supporters of the OpenClaw ecosystem. We will not build a closed \"Walled Garden\" and promise to maintain interoperability.<br><br><b>4. AI Conversation Privacy</b><br>Messages are sent via encrypted HTTPS to your bound AI Agent. Data flow is controlled by you.<br><br><b>5. Contact Us</b><br>If you have any questions, please contact us via our official email.",

        // Chat (chat.html)
        "chat_title": "Chat",
        "chat_filter_all": "All",
        "chat_filter_my": "My Messages",
        "chat_send_to": "Send to:",
        "chat_input_placeholder": "Type a message...",
        "chat_btn_send": "Send",
        "chat_btn_sending": "Sending...",
        "chat_empty": "No messages yet",
        "chat_empty_sub": "Send a message to your entities below",
        "chat_limit_reached": "Daily message limit reached. Upgrade to Premium for unlimited messages!",
        "chat_read": "Read",
        "chat_sent": "Sent",
        "chat_usage_unlimited": "Unlimited",
        "chat_select_entity": "Please select at least one entity",
        "chat_enter_message": "Please enter a message",

        // Admin (admin.html)
        "admin_title": "E-Claw - Admin Dashboard",
        "admin_badge": "ADMIN",
        "admin_refresh": "Refresh",
        "admin_loading": "Loading admin data...",
        "admin_access_denied": "Access Denied",
        "admin_no_privilege": "You do not have admin privileges.",
        "admin_back_dashboard": "Back to Dashboard",
        "admin_error_load": "Failed to load: ",
        "admin_stat_users": "Total Users",
        "admin_stat_premium": "Premium Users",
        "admin_stat_verified": "Verified Emails",
        "admin_stat_devices": "Devices",
        "admin_stat_bound": "Bound Entities",
        "admin_stat_bindings": "Bot Bindings",
        "admin_stat_free": "Free Bindings",
        "admin_stat_personal": "Personal Bindings",
        "admin_stat_messages": "Messages Today",
        "admin_sec_signups": "New Signups (Last 7 Days)",
        "admin_sec_bots": "Official Bots",
        "admin_btn_add_bot": "+ Add Bot",
        "admin_col_bot_id": "Bot ID",
        "admin_col_type": "Type",
        "admin_col_status": "Status",
        "admin_col_assigned": "Assigned To",
        "admin_col_user": "User",
        "admin_col_assigned_at": "Assigned At",
        "admin_no_bots": "No official bots registered",
        "admin_sec_bindings": "Active Bindings",
        "admin_col_device": "Device",
        "admin_col_entity": "Entity",
        "admin_col_bound_at": "Bound At",
        "admin_col_sub_verified": "Sub Verified",
        "admin_no_bindings": "No active bindings",
        "admin_sec_users": "Users",
        "admin_col_email": "Email",
        "admin_col_verified": "Verified",
        "admin_col_sub": "Subscription",
        "admin_col_role": "Role",
        "admin_col_registered": "Registered",
        "admin_col_last_login": "Last Login",
        "admin_no_users": "No users",
        "admin_dlg_add_bot": "Add Official Bot",
        "admin_dlg_bot_id": "Bot ID",
        "admin_dlg_type": "Type",
        "admin_dlg_webhook": "Webhook URL",
        "admin_dlg_token": "Token",
        "admin_dlg_create": "Create",
        "admin_dlg_creating": "Creating...",
        "admin_dlg_cancel": "Cancel",
        "admin_msg_required": "All fields are required.",
        "admin_msg_success": "Bot created successfully!",
        "admin_msg_secret": "Bot Secret (save this):",
        "nav_admin": "Admin"
    },
    zh: {
        // Mission Control (mission.html)
        "mc_title": "E-Claw Mission Control",
        "mc_auth_title": "Mission Control",
        "mc_auth_subtitle": "輸入你的裝置憑證來同步 Dashboard",
        "mc_input_device_id": "Device ID",
        "mc_input_device_secret": "Device Secret",
        "mc_btn_connect": "連線",
        "mc_auth_error_missing": "請輸入 Device ID 和 Secret",
        "mc_refresh": "重新整理",
        "mc_save": "儲存至雲端",
        "mc_saving": "上傳中...",
        "mc_save_unsaved": "儲存至雲端 *",
        "mc_todo_title": "待辦事項",
        "mc_btn_add": "+ 新增",
        "mc_mission_title": "任務列表",
        "mc_done_title": "已完成",
        "mc_notes_title": "筆記 (Bot 唯讀)",
        "mc_rules_title": "規則 (Workflow)",
        "mc_sync_unsaved": "* 未儲存的變更",
        "mc_sync_synced": "已同步",
        "mc_empty_todo": "尚無待辦事項",
        "mc_empty_mission": "尚無進行中的任務",
        "mc_empty_done": "尚無已完成項目",
        "mc_empty_notes": "尚無筆記",
        "mc_empty_rules": "尚無規則",
        "mc_status_pending": "待處理",
        "mc_status_inprogress": "執行中",
        "mc_status_blocked": "阻塞中",
        "mc_status_done": "完成",
        "mc_status_cancelled": "已取消",
        "mc_priority_low": "低",
        "mc_priority_medium": "中",
        "mc_priority_high": "高",
        "mc_priority_urgent": "緊急",
        "mc_confirm_delete": "確定刪除？",
        "mc_confirm_version": "版本衝突 (你: v{you}, 伺服器: v{server})。要下載最新版本嗎？",
        "mc_dlg_add_todo": "新增待辦事項",
        "mc_dlg_edit": "編輯",
        "mc_dlg_title": "標題",
        "mc_dlg_desc": "描述",
        "mc_dlg_priority": "優先權",
        "mc_dlg_save": "儲存",
        "mc_dlg_cancel": "取消",
        "mc_dlg_add_note": "新增筆記",
        "mc_dlg_edit_note": "編輯筆記",
        "mc_dlg_content": "內容",
        "mc_dlg_category": "分類",
        "mc_dlg_add_rule": "新增規則",
        "mc_dlg_edit_rule": "編輯規則",
        "mc_dlg_rule_name": "規則名稱",
        "mc_dlg_rule_type": "類型",
        "mc_menu_move_mission": "移至 Mission",
        "mc_menu_mark_done": "標記完成",
        "mc_menu_delete": "刪除",

        // Portal Shared
        "portal_login_title": "E-Claw - 登入",
        "portal_app_title": "E-Claw",
        "portal_app_subtitle": "動態桌布小幫手",
        "nav_dashboard": "儀表板",
        "nav_chat": "聊天",
        "nav_mission": "任務",
        "nav_settings": "設定",
        "nav_logout": "登出",

        // Login (index.html)
        "login_tab_login": "登入",
        "login_tab_register": "註冊",
        "login_tab_device": "裝置",
        "login_label_email": "Email",
        "login_label_password": "密碼",
        "login_placeholder_email": "your@email.com",
        "login_placeholder_password": "輸入密碼",
        "login_btn_login": "登入",
        "login_btn_logging_in": "登入中...",
        "login_link_forgot": "忘記密碼？",
        "login_label_confirm": "確認密碼",
        "login_hint_password": "必須包含字母和數字",
        "login_btn_create": "建立帳號",
        "login_btn_creating": "建立中...",
        "login_device_desc": "已經有 Android App 了嗎？從 設定 > 網頁版入口 輸入裝置憑證。",
        "login_btn_device": "使用裝置登入",
        "login_forgot_desc": "輸入 Email，我們將寄送重設連結給您。",
        "login_btn_reset_link": "發送重設連結",
        "login_link_back": "返回登入",
        "login_reset_desc": "輸入您的新密碼。",
        "login_btn_reset": "重設密碼",
        "login_msg_fill_all": "請填寫所有欄位",
        "login_msg_pass_match": "密碼不符",

        // Dashboard (dashboard.html)
        "dash_title": "儀表板",
        "dash_loading": "載入實體中...",
        "dash_empty_title": "尚未綁定實體",
        "dash_empty_desc": "在下方新增您的第一個實體以開始使用！",
        "dash_add_entity": "新增實體",
        "dash_label_select_slot": "選擇實體插槽",
        "dash_btn_generate": "產生代碼",
        "dash_btn_generating": "產生中...",
        "dash_btn_regenerate": "重新產生",
        "dash_btn_copy": "複製指令",
        "dash_code_expired": "代碼已過期 - 請重新產生",
        "dash_code_expires_in": "{m}:{ss} 後過期",
        "dash_btn_remove": "移除",
        "dash_remove_title": "移除實體",
        "dash_remove_desc": "確定要移除 <strong>{name}</strong> (#{id}) 嗎？這將解除該實體與您裝置的綁定。",
        "dash_slot_occupied": "插槽 {id} 已被佔用",
        "dash_entity_bound": "{count} / {max} 已綁定",
        "webhook_error_title": "推播通知失敗",
        "webhook_error_message": "請將以下訊息貼給OpenClaw：\"webhook綁定有錯誤或是沒有使用POST /api/bot/register，請重新讀取'公開webhook URL'(gateway config) 以及重新讀取'gateway token'，立即呼叫 /api/bot/register: 用剛綁到的 deviceId/entityId/botSecret 再帶上 webhook_url、gateway token 把推播註冊好。\"",
        "message_copied": "訊息已複製",
        "dash_avatar_desc": "為此實體選擇一個表情符號頭像",
        "dash_code_copied": "指令已複製到剪貼簿！",
        "dash_code_generated": "已產生綁定代碼！",
        "dash_entity_removed": "實體已成功移除",
        "dash_no_messages": "尚無訊息",
        "dash_rename_title": "更改名稱",
        "dash_rename_placeholder": "輸入新名稱（最多 20 字）",
        "dash_rename_save": "儲存",
        "dash_rename_success": "名稱已更新！",

        // Official Borrow (dashboard.html)
        "borrow_title": "官方 Bot 租用",
        "borrow_desc": "為您的實體租用官方 Bot。Bot 會自動與您的動態桌布互動。",
        "borrow_select_entity": "選擇實體",
        "borrow_free_title": "免費版",
        "borrow_free_desc": "每個裝置限一個免費 Bot",
        "borrow_free_feat_shared": "與所有免費用戶共用記憶",
        "borrow_free_feat_limit": "每日 15 則訊息限制",
        "borrow_free_available": "可用",
        "borrow_free_unavailable": "無可用的免費 Bot",
        "borrow_free_bound_other": "已綁定在 Entity #{id}",
        "borrow_personal_title": "月租版",
        "borrow_personal_desc": "專屬個人 Bot",
        "borrow_personal_feat_dedicated": "獨立雲端環境",
        "borrow_personal_feat_memory": "專屬記憶（只屬於你）",
        "borrow_personal_feat_unlimited": "無限訊息（無每日限制）",
        "borrow_personal_feat_247": "24/7 全天候在線",
        "borrow_price_period": "/月",
        "borrow_discount_label": "Beta 限時折扣",
        "borrow_personal_available": "剩餘 {count} 個可用",
        "borrow_personal_sold_out": "已售完",
        "borrow_btn_bind_free": "使用免費版",
        "borrow_btn_bind_personal": "訂閱並綁定",
        "borrow_btn_pay": "付款 NT$288",
        "borrow_btn_unbind": "解除綁定",
        "borrow_btn_binding": "綁定中...",
        "borrow_btn_unbinding": "解除中...",
        "borrow_bound_free": "已綁定免費 Bot",
        "borrow_bound_personal": "已綁定月租 Bot",
        "borrow_slot_occupied": "此實體插槽已有一般綁定",
        "borrow_bind_success": "官方 Bot 綁定成功！",
        "borrow_unbind_success": "已成功解除官方 Bot 綁定",
        "borrow_unbind_title": "解除官方 Bot 綁定",
        "borrow_unbind_desc": "確定要解除 Entity #{id} 的官方 Bot 嗎？Bot 將歸還到池中。",
        "borrow_current_bindings": "目前綁定",
        "borrow_no_bindings": "尚未綁定官方 Bot",
        "borrow_type_free": "免費版",
        "borrow_type_personal": "月租版",
        "borrow_entity_has_binding": "已有官方 Bot",
        "borrow_pay_title": "官方 Bot 租用 - NT$288/月",
        "borrow_pay_desc": "輸入信用卡資訊以租用專屬個人 Bot（NT$288/月）。含無限訊息及 24/7 全天候在線。",
        "borrow_cost_title": "為什麼租用？自建成本比較",
        "borrow_cost_eclaw": "E-Claw 官方 Bot",
        "borrow_cost_24_7": "24/7 穩定不斷線",
        "borrow_cost_included": "已包含",
        "borrow_cost_server": "雲端伺服器 (Railway/AWS)",
        "borrow_cost_llm": "LLM API (OpenAI/Claude)",
        "borrow_cost_setup": "自行摸索 OpenClaw 部署",
        "borrow_cost_priceless": "無價的時間",

        // Settings (settings.html)
        "settings_title": "設定",
        "settings_account": "帳號",
        "settings_email": "Email",
        "settings_device_id": "Device ID",
        "settings_sub": "訂閱",
        "settings_sub_premium": "高級會員",
        "settings_sub_free": "免費版",
        "settings_usage_today": "今日訊息",
        "settings_usage_unlimited": "今日已送 {used} 則 (無限制)",
        "settings_usage_limit": "今日 {used}/{limit} 則",
        "settings_renews_on": "續約日期：{date}",
        "settings_price": "NT$99",
        "settings_period": "每月",
        "settings_sub_benefit_1": "\u2713 無限訊息（無每日 15 則限制）",
        "settings_sub_benefit_2": "\u2713 實體上限增加至 8 個（原為 4 個）",
        "settings_btn_subscribe": "訂閱",
        "settings_btn_hide_card": "隱藏卡片表格",
        "settings_label_card": "卡號",
        "settings_label_expiry": "到期日",
        "settings_label_ccv": "CCV",
        "settings_btn_pay": "支付 NT$99",
        "settings_processing": "處理付款中...",
        "settings_btn_cancel": "取消訂閱",
        "settings_btn_cancelling": "取消中...",
        "settings_cancel_title": "取消訂閱",
        "settings_cancel_desc": "您的高級會員資格將保留至本期結束。之後將恢復為免費版（每日 15 則訊息）。",
        "settings_btn_keep": "保留訂閱",
        "settings_lang": "語言",
        "settings_lang_changed": "語言已變更，重新載入中...",
        "settings_version": "版本",
        "settings_privacy_link": "隱私權政策",
        "settings_privacy_title": "隱私權政策",
        "settings_privacy_content": "<b>1. 隱私權至上承諾</b><br>E-claw (電子蝦) 團隊深知隱私對您的重要性。我們在此鄭重聲明：<b>我們絕不會販賣、洩露或濫用您的任何個人資料。</b><br><br><b>2. 我們收集什麼資料？</b><br>為了提供服務，我們僅收集運作所需的最少資料：<br>- 裝置 ID：用於區分不同裝置。<br>- App 版本：用於相容性檢查。<br>- 綁定資料：Agent 名稱與狀態。<br><br><b>我們「不」收集：</b><br>- 您的姓名、電話或 Email。<br>- 您的 GPS 位置。<br>- 您的相機或麥克風資料。<br><br><b>3. OpenClaw 協議</b><br>我們是 OpenClaw 生態系統的堅定支持者。我們不會建立封閉的「圍牆花園」，並承諾保持互通性。<br><br><b>4. AI 對話隱私</b><br>訊息透過加密 HTTPS 傳送至您綁定的 AI Agent。資料流向由您掌控。<br><br><b>5. 聯絡我們</b><br>如有任何疑問，請透過我們的官方 Email 聯繫。",

        // Chat (chat.html)
        "chat_title": "聊天",
        "chat_filter_all": "全部",
        "chat_filter_my": "我的訊息",
        "chat_send_to": "傳送給：",
        "chat_input_placeholder": "輸入訊息...",
        "chat_btn_send": "傳送",
        "chat_btn_sending": "傳送中...",
        "chat_empty": "尚無訊息",
        "chat_empty_sub": "在下方傳送訊息給您的實體",
        "chat_limit_reached": "已達每日訊息上限。升級至高級會員以享受無限訊息！",
        "chat_read": "已讀",
        "chat_sent": "已送出",
        "chat_usage_unlimited": "無限制",
        "chat_select_entity": "請選擇至少一個實體",
        "chat_enter_message": "請輸入訊息",

        // Admin (admin.html)
        "admin_title": "E-Claw - 管理者儀表板",
        "admin_badge": "管理員",
        "admin_refresh": "重新整理",
        "admin_loading": "載入管理數據中...",
        "admin_access_denied": "拒絕存取",
        "admin_no_privilege": "您沒有管理員權限。",
        "admin_back_dashboard": "返回儀表板",
        "admin_error_load": "載入失敗：",
        "admin_stat_users": "總用戶數",
        "admin_stat_premium": "高級用戶",
        "admin_stat_verified": "已驗證 Email",
        "admin_stat_devices": "裝置總數",
        "admin_stat_bound": "已綁定實體",
        "admin_stat_bindings": "Bot 綁定數",
        "admin_stat_free": "免費綁定",
        "admin_stat_personal": "個人綁定",
        "admin_stat_messages": "今日訊息數",
        "admin_sec_signups": "近期註冊 (過去 7 天)",
        "admin_sec_bots": "官方 Bot 列表",
        "admin_btn_add_bot": "+ 新增 Bot",
        "admin_col_bot_id": "Bot ID",
        "admin_col_type": "類型",
        "admin_col_status": "狀態",
        "admin_col_assigned": "指派給",
        "admin_col_user": "用戶",
        "admin_col_assigned_at": "指派時間",
        "admin_no_bots": "尚無官方 Bot 註冊",
        "admin_sec_bindings": "活躍綁定",
        "admin_col_device": "裝置",
        "admin_col_entity": "實體",
        "admin_col_bound_at": "綁定時間",
        "admin_col_sub_verified": "訂閱驗證",
        "admin_no_bindings": "尚無活躍綁定",
        "admin_sec_users": "用戶列表",
        "admin_col_email": "Email",
        "admin_col_verified": "已驗證",
        "admin_col_sub": "訂閱狀態",
        "admin_col_role": "角色",
        "admin_col_registered": "註冊時間",
        "admin_col_last_login": "最後登入",
        "admin_no_users": "尚無用戶",
        "admin_dlg_add_bot": "新增官方 Bot",
        "admin_dlg_bot_id": "Bot ID",
        "admin_dlg_type": "類型",
        "admin_dlg_webhook": "Webhook 網址",
        "admin_dlg_token": "Token",
        "admin_dlg_create": "建立",
        "admin_dlg_creating": "建立中...",
        "admin_dlg_cancel": "取消",
        "admin_msg_required": "所有欄位皆為必填。",
        "admin_msg_success": "Bot 建立成功！",
        "admin_msg_secret": "Bot Secret (請妥善保存)：",
        "nav_admin": "管理員"
    }
};

// Portal version for sync tracking
const PORTAL_VERSION = '1.2.0';

class I18n {
    constructor() {
        const saved = localStorage.getItem('eclaw-language');
        if (saved) {
            this.lang = saved;
        } else {
            // Auto-detect from browser language
            const browserLang = (navigator.language || navigator.userLanguage || 'en').toLowerCase();
            this.lang = browserLang.startsWith('zh') ? 'zh' : 'en';
        }
        this.observers = [];
    }

    setLanguage(lang) {
        if (!TRANSLATIONS[lang]) return;
        this.lang = lang;
        localStorage.setItem('eclaw-language', lang);
        this.apply();
        this.observers.forEach(cb => cb(lang));
    }

    t(key, params = {}) {
        const dict = TRANSLATIONS[this.lang] || TRANSLATIONS['en'];
        let str = dict[key] || TRANSLATIONS['en'][key] || key;

        // Simple parameter replacement {name}
        Object.keys(params).forEach(k => {
            str = str.replace(new RegExp(`\\{${k}\\}`, 'g'), params[k]);
        });
        return str;
    }

    apply() {
        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.getAttribute('data-i18n');
            if (key) {
                if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
                    if (el.hasAttribute('placeholder')) {
                        el.placeholder = this.t(key);
                    }
                } else {
                    el.innerHTML = this.t(key);
                }
            }
        });

        // Update html lang attribute
        document.documentElement.lang = this.lang === 'zh' ? 'zh-TW' : 'en';
    }

    onLanguageChange(cb) {
        this.observers.push(cb);
    }
}

// Global instance
const i18n = new I18n();

// Auto-apply on load
document.addEventListener('DOMContentLoaded', () => {
    i18n.apply();
});
